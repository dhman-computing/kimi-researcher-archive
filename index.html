<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Researcher’s Archive</title>
  <style>
    :root {
      --bg: #fdfdfd;
      --fg: #111;
      --accent: #0066cc;
      --card-bg: #ffffff;
      --card-shadow: 0 2px 8px rgba(0,0,0,.08);
      font-family: system-ui, sans-serif;
    }
    body { background: var(--bg); color: var(--fg); margin: 0; padding: 2rem; }
    header { margin-bottom: 2rem; }
    h1 { font-size: 2.2rem; margin: 0 0 .3rem 0; }
    p.sub { margin: 0; color: #555; }
    .grid {
      display: grid;
      gap: 1.2rem;
      grid-template-columns: repeat(auto-fill,minmax(280px,1fr));
    }
    .card {
      background: var(--card-bg);
      border-radius: 8px;
      box-shadow: var(--card-shadow);
      padding: 1.2rem;
      transition: .15s;
    }
    .card:hover { transform: translateY(-3px); box-shadow: 0 4px 16px rgba(0,0,0,.12); }
    .card h3 { margin: 0 0 .4rem 0; font-size: 1.1rem; }
    .card .meta { font-size: .85rem; color: #666; margin-bottom: .6rem; }
    .card a { color: var(--accent); text-decoration: none; }
    .card a:hover { text-decoration: underline; }
    footer { margin-top: 3rem; font-size: .8rem; color: #888; }
  </style>
</head>

<body>
  <header>
    <h1>Researcher’s Archive</h1>
    <p class="sub">A living collection of every webpage generated by the Researcher tool.</p>
  </header>

  <!-- Auto-discover and list all *.html files in the repo -->
  <main id="cards" class="grid">Loading…</main>

  <footer>
    Powered by <a href="https://pages.github.com" target="_blank" rel="noopener">GitHub Pages</a>.
    Add a new page by simply pushing another *.html file.
  </footer>

<script>
/* Fetch the repo’s file tree via GitHub API and build the cards */
const owner   = 'your-username';           // <── change
const repo    = 'researcher-archive';      // <── change
const branch  = 'main';

fetch(`https://api.github.com/repos/${owner}/${repo}/git/trees/${branch}?recursive=1`)
  .then(r => r.json())
  .then(data => {
    const htmlFiles = data.tree.filter(item => item.path.endsWith('.html') && item.path !== 'index.html');
    const cards = document.getElementById('cards');

    if (htmlFiles.length === 0) {
      cards.innerHTML = '<p>No pages yet. Commit a <code>*.html</code> file to see it listed here.</p>';
      return;
    }

    cards.innerHTML = ''; // clear “Loading…”
    htmlFiles.forEach(file => {
      const name = file.path.replace(/\.html$/, '').replace(/_/g, ' ');
      const url  = `https://${owner}.github.io/${repo}/${file.path}`;
      const date = new Date().toLocaleDateString(); // crude, could read commit date later

      const card = document.createElement('div');
      card.className = 'card';
      card.innerHTML = `
        <h3><a href="${url}">${name}</a></h3>
        <div class="meta">${date}</div>
        <a href="${url}">Open →</a>`;
      cards.appendChild(card);
    });
  })
  .catch(err => {
    console.error(err);
    document.getElementById('cards').innerHTML = '<p>Could not load file list.</p>';
  });
</script>
</body>
</html>
